<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Internal Lab Access</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;700&family=Roboto:wght@300;400&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Roboto', sans-serif;
            background-color: #010409;
            color: #e0e0e0;
            overflow: hidden;
        }
        .font-orbitron { font-family: 'Orbitron', sans-serif; }
        
        .main-bg {
            background-color: #010409;
            background-image:
                linear-gradient(rgba(2, 21, 39, 0.5) .1em, transparent .1em),
                linear-gradient(90deg, rgba(2, 21, 39, 0.5) .1em, transparent .1em);
            background-size: 3em 3em;
            animation: grid-scroll 15s linear infinite;
        }
        @keyframes grid-scroll {
            from { background-position: 0 0; }
            to { background-position: 3em 3em; }
        }

        .tech-card {
            border: 1px solid #0d3b57;
            background-color: #061524;
            transition: all 0.3s ease;
        }
        .tech-card:hover {
            background-color: #0a253a;
            border-color: #15a2e0;
            transform: translateY(-4px);
            box-shadow: 0 0 20px rgba(21, 162, 224, 0.3);
        }
        @keyframes content-fade-in {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .animate-content-fade-in {
            animation: content-fade-in 0.5s ease-out forwards;
        }

        .text-glow {
            text-shadow: 0 0 8px rgba(34, 211, 238, 0.5), 0 0 2px rgba(34, 211, 238, 0.5);
        }
        @keyframes pulse-glow {
            0%, 100% { filter: drop-shadow(0 0 4px rgba(34, 211, 238, 0.4)); }
            50% { filter: drop-shadow(0 0 12px rgba(34, 211, 238, 0.8)); }
        }
        .animate-pulse-glow {
            animation: pulse-glow 4s ease-in-out infinite;
        }
        
        .char-box {
            height: 3.5rem;
            width: 2.5rem;
            background-color: rgba(14, 165, 233, 0.05);
            border: 1px solid rgba(14, 165, 233, 0.2);
            border-radius: 0.25rem;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.2s ease-in-out;
        }
        .char-box-filled::after {
            content: '‚óè';
            color: #22D3EE;
            font-size: 1.5rem;
            animation: pop-in 0.2s ease-out;
        }
        @keyframes pop-in {
            from { transform: scale(0.5); opacity: 0; }
            to { transform: scale(1); opacity: 1; }
        }

        @keyframes flash-red {
            0%, 100% { border-color: rgba(248, 113, 113, 0.4); box-shadow: 0 0 8px rgba(248, 113, 113, 0); }
            50% { border-color: #f87171; box-shadow: 0 0 8px rgba(248, 113, 113, 0.5); }
        }
        .animate-flash-red .char-box, .animate-flash-red .lock-error {
            animation: flash-red 0.5s ease-in-out 2;
        }
        .lock-error {
            --tw-text-opacity: 1;
            color: rgb(248 113 113 / var(--tw-text-opacity));
            filter: drop-shadow(0 0 8px rgba(248, 113, 113, 0.7));
        }

    </style>
</head>
<body>
    <div id="root" class="w-screen h-screen main-bg"></div>

    <script type="text/babel">
        const { useState, useEffect, useRef } = React;

        const CORRECT_PASSWORD = "1234";
        const TOTAL_TIME_SECONDS = 600; 

        // --- SVG Icons ---
        const LockIcon = ({ className }) => (
            <svg className={className} xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" strokeWidth="1" strokeLinecap="round" strokeLinejoin="round">
                <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
            </svg>
        );
        const CloseIcon = () => (
             <svg xmlns="http://www.w3.org/2000/svg" className="h-5 w-5" viewBox="0 0 20 20" fill="currentColor">
                <path fillRule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clipRule="evenodd" />
            </svg>
        );
        const VerticalBattery = ({ percentage }) => {
            const fillHeight = Math.max(0, Math.min(100, percentage));
            return (
                <div className="flex items-center justify-center p-2">
                    <svg width="28" height="48" viewBox="0 0 28 48" fill="none" xmlns="http://www.w3.org/2000/svg">
                        <rect x="2" y="5" width="24" height="40" rx="4" stroke="#6B7280" strokeWidth="2"/>
                        <rect x="8" y="2" width="12" height="3" rx="1.5" fill="#6B7280"/>
                        <rect x="4" y={43 - (fillHeight / 100) * 36} width="20" height={(fillHeight / 100) * 36} rx="2" fill="#22D3EE"/>
                    </svg>
                </div>
            );
        };

        // --- UI Components ---
        const InfoPanel = () => (
            <div className="w-72 p-6 space-y-6 text-sm border-r border-cyan-900/50 bg-[#010409]/80 backdrop-blur-sm">
                <h3 className="text-cyan-400 font-orbitron text-glow">JAVA</h3>
                <p className="text-xs text-gray-400">This course is provisioned by Zicops Labs</p>
                <div className="space-y-4">
                    <div><div className="flex justify-between items-center text-gray-300"><span>EXERCISE</span><span>9 <span className="text-gray-500">of 84</span></span></div></div>
                    <div><div className="flex justify-between items-center text-gray-300"><span>PROJECTS</span><span>2 <span className="text-gray-500">of 8</span></span></div></div>
                    <div><div className="flex justify-between items-center text-gray-300"><span>TIME SPENT</span><span>5 <span className="text-gray-500">of 84h</span></span></div></div>
                </div>
            </div>
        );

        const TimerPanel = ({ timeLeft }) => {
            const formatTime = (seconds) => {
                const mins = String(Math.floor(seconds / 60)).padStart(2, '0');
                const secs = String(seconds % 60).padStart(2, '0');
                return `${mins}m ${secs}s`;
            };
            const initialMinutes = Math.floor(TOTAL_TIME_SECONDS / 60);
            const timePercentage = (timeLeft / TOTAL_TIME_SECONDS) * 100;
            return (
                 <div className="w-72 p-6 space-y-2 text-right border-l border-cyan-900/50 flex flex-col items-end bg-[#010409]/80 backdrop-blur-sm">
                    <button className="text-gray-500 hover:text-white mb-4"> <CloseIcon /> </button>
                    <h3 className="text-cyan-400 font-orbitron text-glow">TIME REMAINING</h3>
                    <VerticalBattery percentage={timePercentage} />
                    <p className="text-3xl font-orbitron text-white mt-2 text-glow">{formatTime(timeLeft)}</p>
                    <p className="text-sm text-gray-400">out of {initialMinutes} Min</p>
                 </div>
            );
        };

        const PasswordInput = ({ password, hasError }) => {
            const boxes = Array.from({ length: CORRECT_PASSWORD.length });
            return (
                <div className={`flex justify-center items-center gap-2 mt-4 ${hasError ? 'animate-flash-red' : ''}`}>
                    {boxes.map((_, index) => (
                        <div key={index} className={`char-box ${index < password.length ? 'char-box-filled' : ''}`}></div>
                    ))}
                </div>
            );
        };

        // UPDATED: Now fades out its lock when animation starts
        const LoginScreen = ({ password, setPassword, error, isAnimating }) => {
            const inputRef = useRef(null);
            useEffect(() => {
                inputRef.current.focus();
            }, []);
            return (
                <div className="flex flex-col items-center justify-center h-full" onClick={() => inputRef.current.focus()}>
                    <div className="relative flex flex-col items-center justify-center">
                        <LockIcon className={
                            `w-48 h-48 transition-all duration-300 
                            ${isAnimating ? 'opacity-0 scale-75' : 'opacity-100 scale-100'} 
                            ${error ? 'lock-error' : 'text-cyan-800 animate-pulse-glow'}`
                        } />
                        <h2 className="font-orbitron text-2xl mt-4 text-gray-400">SYSTEM ACCESS</h2>
                        <p className="text-gray-500">Enter authorization code</p>
                    </div>
                    
                    <PasswordInput password={password} hasError={!!error} />

                    <input ref={inputRef} type="password" value={password} onChange={(e) => setPassword(e.target.value)} className="absolute w-px h-px opacity-0"/>

                    {error && <p className="mt-8 text-lg text-red-400 font-orbitron">{error}</p>}
                </div>
            );
        };
        
        // UPDATED: Lock now "powers up" from dim to bright
        const EntryAnimation = ({ isAnimating }) => {
            const [startAnimation, setStartAnimation] = useState(false);
            useEffect(() => {
                if (isAnimating) {
                    const timer = setTimeout(() => setStartAnimation(true), 50);
                    return () => clearTimeout(timer);
                } else {
                    setStartAnimation(false);
                }
            }, [isAnimating]);

            if (!isAnimating) return null;
            
            return (
                <div className="fixed inset-0 z-50 overflow-hidden pointer-events-none">
                    <div className="absolute top-0 left-0 w-1/2 h-full bg-[#010409] transition-transform duration-1000 ease-in-out" style={{ transform: startAnimation ? 'translateX(-100%)' : 'translateX(0)' }}/>
                    <div className="absolute top-0 right-0 w-1/2 h-full bg-[#010409] transition-transform duration-1000 ease-in-out" style={{ transform: startAnimation ? 'translateX(100%)' : 'translateX(0)' }}/>
                    <div className="absolute inset-0 flex items-center justify-center transition-all duration-700 ease-in-out" style={{ opacity: startAnimation ? 0 : 1, transform: startAnimation ? 'scale(0.5) rotate(180deg)' : 'scale(1) rotate(0deg)' }}>
                        <LockIcon className={
                            `w-48 h-48 transition-colors duration-300 
                            ${startAnimation ? 'text-cyan-400 text-glow' : 'text-cyan-800 animate-pulse-glow'}`
                        } />
                    </div>
                </div>
            );
        };

        const LabDashboard = ({ handleExit }) => {
            const tech = ["React JS", "C", "Angular", "Tailwind CSS", "TensorFlow", "HTML 5", "GraphQL", "python", "node", "php"];
            const emptySlots = Array(15 - tech.length).fill(null);
            return (
                <div className="p-8 h-full flex flex-col animate-content-fade-in bg-[#010409]/50 backdrop-blur-sm">
                    <div className="flex justify-between items-start mb-6">
                        <div>
                            <h1 className="text-2xl font-orbitron text-cyan-300 text-glow">Programming</h1>
                            <p className="text-sm text-gray-400">Select a lab to begin</p>
                        </div>
                         <button onClick={() => handleExit(false)} className="bg-gray-700 hover:bg-red-700 text-white font-bold py-2 px-6 rounded-md transition-all text-sm">Exit</button>
                    </div>
                    <div className="flex-grow grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
                        {tech.map((t) => <div key={t} className="tech-card p-4 rounded-md flex items-center justify-center text-center cursor-pointer"><span className="font-bold text-gray-300">{t}</span></div>)}
                        {emptySlots.map((_, i) => <div key={`fill-${i}`} className="tech-card opacity-20"></div>)}
                    </div>
                </div>
            );
        }

        function App() {
            const [isAuthenticated, setIsAuthenticated] = useState(false);
            const [isAnimating, setIsAnimating] = useState(false);
            const [password, setPassword] = useState("");
            const [error, setError] = useState("");
            const [timeLeft, setTimeLeft] = useState(TOTAL_TIME_SECONDS);
            const timerRef = useRef(null);

            useEffect(() => {
                if (password.length > 0 && password !== CORRECT_PASSWORD && password.length >= CORRECT_PASSWORD.length) {
                    setError("ACCESS DENIED");
                    setTimeout(() => setError(""), 1000); 
                } else {
                    setError("");
                }
                if (password === CORRECT_PASSWORD && !isAuthenticated && !isAnimating) {
                    setIsAnimating(true);
                    setTimeout(() => setIsAuthenticated(true), 500);
                    setTimeout(() => {
                        setIsAnimating(false);
                        setPassword('');
                    }, 1500);
                }
            }, [password, isAuthenticated, isAnimating]);

            useEffect(() => {
                if (isAuthenticated) {
                    timerRef.current = setInterval(() => {
                        setTimeLeft(prevTime => {
                            if (prevTime <= 1) {
                                clearInterval(timerRef.current);
                                handleExit(true);
                                return 0;
                            }
                            return prevTime - 1;
                        });
                    }, 1000);
                } else {
                    clearInterval(timerRef.current);
                }
                return () => clearInterval(timerRef.current);
            }, [isAuthenticated]);
            
            const handleExit = (isAutoExit = false) => {
                setIsAuthenticated(false);
                if (isAutoExit) {
                   setError("Session terminated: Time limit reached.");
                }
            };

            return (
                <div className="relative w-full h-full">
                    <div className="flex h-full">
                        <InfoPanel />
                        <main className="flex-grow h-full">
                            {isAuthenticated ? (
                                <LabDashboard handleExit={handleExit} />
                            ) : (
                                <LoginScreen 
                                    password={password}
                                    setPassword={setPassword}
                                    error={error || (timeLeft <= 0 && "Time Exhausted.")}
                                    isAnimating={isAnimating}
                                />
                            )}
                        </main>
                        <TimerPanel timeLeft={timeLeft} />
                    </div>
                    <EntryAnimation isAnimating={isAnimating} />
                </div>
            );
        }

        const container = document.getElementById('root');
        const root = ReactDOM.createRoot(container);
        root.render(<App />);
    </script>
</body>
</html>
